<!-- public/index.html (Updated: Secure Firebase Config & VIP Authentication) -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UltraPredict</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js"></script>
</head>
<body>
    <h1>UltraPredict Football Predictions</h1>
    
    <!-- Regular Predictions Table -->
    <h2>Free Predictions</h2>
    <table id="predictionsTable">
        <tr><th>Match</th><th>Prediction</th></tr>
    </table>
    
    <!-- VIP Section -->
    <div id="vip-section">
        <h2>VIP Predictions (Exclusive)</h2>
        <p>Subscribe to get premium betting tips with higher accuracy.</p>
        <div id="vip-auth">
            <input type="email" id="vip-email" placeholder="Enter your email">
            <input type="password" id="vip-password" placeholder="Enter your password">
            <button onclick="registerVIP()">Register</button>
            <button onclick="loginVIP()">Login</button>
            <button onclick="logoutVIP()" style="display:none;">Logout</button>
        </div>
        <button id="subscribe-btn" onclick="subscribeVIP()">Subscribe to VIP</button>
        <table id="vipPredictionsTable" style="display:none;">
            <tr><th>Match</th><th>VIP Tip</th></tr>
        </table>
    </div>
    
    <!-- PayPal Script -->
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID"></script>
    <script>
        // Fetch Firebase config from the backend
        fetch('/firebase-config')
            .then(response => response.json())
            .then(config => {
                firebase.initializeApp(config);
            })
            .catch(error => console.error("Error loading Firebase config:", error));
        
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        function registerVIP() {
            const email = document.getElementById("vip-email").value;
            const password = document.getElementById("vip-password").value;
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => alert("Registered successfully!"))
                .catch((error) => alert(error.message));
        }
        
        function loginVIP() {
            const email = document.getElementById("vip-email").value;
            const password = document.getElementById("vip-password").value;
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    alert("Login successful!");
                    document.getElementById("vipPredictionsTable").style.display = "block";
                    document.querySelector("button[onclick='logoutVIP()']").style.display = "block";
                })
                .catch((error) => alert(error.message));
        }
        
        function logoutVIP() {
            auth.signOut().then(() => {
                alert("Logged out successfully!");
                document.getElementById("vipPredictionsTable").style.display = "none";
                document.querySelector("button[onclick='logoutVIP()']").style.display = "none";
            });
        }
        
        function subscribeVIP() {
            alert("Redirecting to PayPal for VIP Subscription...");
            // PayPal payment integration logic (to be implemented)
        }
    </script>
    
    <script src="./fetchPredictions.js"></script>
    <script src="./predictions.js"></script>
</body>
</html>
